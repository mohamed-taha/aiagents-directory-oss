{% extends "base.html" %}

{% block title %}{{ category.name }} AI Agents | AiAgents.Directory{% endblock %}

{% block meta_basic %}
    <link rel="canonical" href="{{ request.build_absolute_uri }}" />
    <meta name="description" content="Explore {{ category.name }} AI agents and tools. Find the best {{ category.name|lower }} AI agents for your needs.">
    
    {% if prev_page_url %}
        <link rel="prev" href="{{ prev_page_url }}">
    {% endif %}
    {% if next_page_url %}
        <link rel="next" href="{{ next_page_url }}">
    {% endif %}
{% endblock %}

{% block og_title %}{{ category.name }} AI Agents{% endblock %}
{% block og_description %}Explore {{ category.name }} AI agents and tools. Find the best {{ category.name|lower }} AI agents for your needs.{% endblock %}

{% block content %}
<!-- Header Section -->
<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16">
    <div class="text-center max-w-3xl mx-auto">
        <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold mb-4 sm:mb-6 text-gray-900 dark:text-white">
            {{ category.name }} AI Agents
        </h1>
        <p class="text-base sm:text-lg text-gray-600 dark:text-gray-300 mb-6 sm:mb-8 px-4">
            Discover the best {{ category.name|lower }} AI agents and tools.
        </p>
        <div class="max-w-xl mx-auto px-4">
            <form method="get" class="relative">
                <input type="text" 
                       name="search" 
                       placeholder="Search {{ category.name }} agents..." 
                       class="w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg bg-gray-50 dark:bg-dark-800 border border-gray-200 dark:border-dark-700 focus:border-accent-500 dark:focus:border-accent-500 focus:ring-1 focus:ring-accent-500 text-gray-800 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400"
                       value="{{ search_query }}">
            </form>
        </div>
    </div>
</div>

<!-- Main Content -->
<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pb-12 sm:pb-16 lg:pb-20">
    <!-- Categories Filter -->
    <div class="flex flex-wrap gap-2 sm:gap-4 mb-6 sm:mb-8">
        <!-- All Agents -->
        <a href="{% url 'agent_list' %}{% if search_query %}?search={{ search_query }}{% endif %}" 
           class="inline-flex items-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-full shadow-sm hover:shadow-md text-sm sm:text-base 
                  bg-white dark:bg-dark-800 text-gray-800 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-dark-700 hover:text-accent-500 dark:hover:text-accent-500 border border-gray-200 dark:border-dark-700
                  transition-all duration-200">
            All Agents
            <span class="ml-1 text-sm opacity-75">({{ total_agents_count }})</span>
        </a>

        <!-- Categories -->
        {% for cat in categories %}
        <a href="{% url 'category_detail' slug=cat.slug %}{% if search_query %}?search={{ search_query }}{% endif %}"
           class="inline-flex items-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-full shadow-sm hover:shadow-md text-sm sm:text-base 
                  {% if cat.slug == category.slug %}bg-accent-500 text-white hover:bg-accent-600
                  {% else %}bg-white dark:bg-dark-800 text-gray-800 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-dark-700 hover:text-accent-500 dark:hover:text-accent-500 border border-gray-200 dark:border-dark-700{% endif %} 
                  transition-all duration-200">
            {{ cat.name }}
            <span class="ml-1 text-sm opacity-75">({{ cat.agent_count }})</span>
        </a>
        {% endfor %}
    </div>

    {% if agents %}
        <!-- Agents Grid -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
            {% for agent in agents %}
                {% include "agents/partials/agent_card.html" with agent=agent %}
            {% endfor %}
        </div>

        <!-- Results Count -->
        <div class="text-center text-sm text-gray-600 dark:text-gray-400 mt-8">
            Showing {{ agents.start_index }}-{{ agents.end_index }}
            of {{ agents.paginator.count }} {{ category.name|lower }} agents
            {% if search_query %}matching "{{ search_query }}"{% endif %}
        </div>

        <div class="mt-10">
        </div>

        <!-- Pagination -->
        {% if agents.paginator.num_pages > 1 %}
        <div class="flex justify-center gap-2 mt-4">
            {% if agents.has_previous %}
            <a href="?{% if search_query %}search={{ search_query }}&{% endif %}page={{ agents.previous_page_number }}"
               class="px-3 sm:px-4 py-2 rounded-lg bg-white dark:bg-dark-800 hover:bg-gray-50 dark:hover:bg-dark-700 text-sm sm:text-base transition-colors border border-gray-200 dark:border-dark-700">
                Previous
            </a>
            {% endif %}
            
            {% if agents.has_next %}
            <a href="?{% if search_query %}search={{ search_query }}&{% endif %}page={{ agents.next_page_number }}"
               class="px-3 sm:px-4 py-2 rounded-lg bg-white dark:bg-dark-800 hover:bg-gray-50 dark:hover:bg-dark-700 text-sm sm:text-base transition-colors border border-gray-200 dark:border-dark-700">
                Next
            </a>
            {% endif %}
        </div>
        {% endif %}
    {% else %}
        <!-- No Results -->
        <div class="text-center py-12">
            <p class="text-lg text-gray-600 dark:text-gray-400">
                {% if search_query %}
                    No {{ category.name|lower }} agents found matching "{{ search_query }}"
                {% else %}
                    No agents found in this category
                {% endif %}
            </p>
        </div>
    {% endif %}
</div>
{% endblock %}